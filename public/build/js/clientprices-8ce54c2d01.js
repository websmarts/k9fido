!function(t){function e(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,e,n){Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){var i,s;n(6),i=n(1);var r=n(4);s=i=i||{},"object"!=typeof i["default"]&&"function"!=typeof i["default"]||(s=i=i["default"]),"function"==typeof s&&(s=s.options),s.render=r.render,s.staticRenderFns=r.staticRenderFns,t.exports=i},function(t,e,n){"use strict";e["default"]={props:["json_client","url"],data:function(){return{prices:[],client:{},add_product_code:"",add_product_discount:null,message:""}},methods:{newDiscount:function(t){return(1-t.client_price/t.latest_std_price).toFixed(3)},saveChanges:function(){var t=[];if(_.each(this.prices,function(e){t.push({product_code:e.product_code,discount:e.updated_discount})}),t.length>0){var e={client_id:this.client.client_id,updates:t,action:"update_prices"};this.message="saving ....",this.remote(e).then(function(){this.message=""}.bind(this))}},addProduct:function(){var t={client_id:this.client.client_id,product_code:this.add_product_code,discount:this.add_product_discount,action:"add_product"};this.message="adding ...."+this.add_product_code,this.remote(t).then(function(){this.message=""}.bind(this)),this.add_product_code="",this.add_product_discount=null},deleteProduct:function(t){var e={client_id:this.client.client_id,product_code:t,action:"delete_product"};this.message="deleting ....",this.remote(e).then(function(){this.message=""}.bind(this))},getPriceList:function(){var t={client_id:this.client.client_id,action:"get_client_prices"};this.message="loading prices ....",this.remote(t).then(function(){this.message=""}.bind(this))},remote:function(t){var e=this;return this.$http.post(this.url,t).then(function(t){var n=t.body;e.prices=[],_.each(n,function(t){t.updated_discount=t.discount,this.prices.push(t)}.bind(e))},function(t){})}},mounted:function(){this.client=JSON.parse(this.json_client),this.getPriceList()}}},function(t,e,n){e=t.exports=n(3)(),e.push([t.i,"\n#pricelist input {\n  width: 6em;\n}\n#pricelist .fa-minus-circle {\n  color: #ff0000;\n}\n#pricelist .message {\n  padding: 10px;\n  color: white;\n  background: blue;\n}\n",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(i[r]=!0)}for(s=0;s<e.length;s++){var o=e[s];"number"==typeof o[0]&&i[o[0]]||(n&&!o[2]?o[2]=n:n&&(o[2]="("+o[2]+") and ("+n+")"),t.push(o))}},t}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"pricelist"}},[n("h3",[t._v(t._s(t.client.name))]),t._v(" "),t.message?n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-12 message"},[n("span",{domProps:{textContent:t._s(t.message)}})])]):t._e(),t._v(" "),n("div",{staticClass:"row",staticStyle:{background:"#eee","padding-top":"10px","padding-bottom":"8px"}},[n("div",{staticClass:"col-sm-4"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.add_product_code,expression:"add_product_code"}],attrs:{type:"text"},domProps:{value:t.add_product_code},on:{input:function(e){e.target.composing||(t.add_product_code=e.target.value)}}}),t._v(" Product code")]),t._v(" "),n("div",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.add_product_discount,expression:"add_product_discount"}],attrs:{type:"text"},domProps:{value:t.add_product_discount},on:{input:function(e){e.target.composing||(t.add_product_discount=e.target.value)}}}),t._v(" Discount")]),t._v(" "),n("div",{staticClass:"col-sm-2 col-md-offset-2"},[n("button",{staticClass:"btn btn-primary",on:{click:t.addProduct}},[t._v("Add client price")])])]),t._v(" "),t._m(0),t._v(" "),t._l(t.prices,function(e){return n("div",{staticClass:"row",attrs:{"track-by":"id"}},[n("div",{staticClass:"col-sm-2"},[t._v(t._s(e.product_code))]),t._v(" "),n("div",{staticClass:"col-sm-2"},[t._v(t._s(e.std_price)),e.std_price!=e.latest_std_price?n("span",[t._v(" : "+t._s(e.latest_std_price))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-2"},[t._v(t._s(e.discount.toFixed(3))),e.std_price!=e.latest_std_price?n("span",[t._v(" : "+t._s(t.newDiscount(e)))]):t._e()]),t._v(" "),n("div",{staticClass:"col-sm-2"},[t._v(t._s(e.client_price))]),t._v(" "),n("div",{staticClass:"col-sm-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.updated_discount,expression:"price.updated_discount"}],domProps:{value:e.updated_discount},on:{input:function(n){n.target.composing||t.$set(e,"updated_discount",n.target.value)}}}),t._v(" "),n("i",{staticClass:"fa fa-minus-circle",attrs:{"aria-hidden":"true"},on:{click:function(n){t.deleteProduct(e.product_code)}}})])])}),t._v(" "),n("button",{staticClass:"btn btn-primary pull-right",on:{click:t.saveChanges}},[t._v("Save")])],2)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row"},[n("div",{staticClass:"col-sm-2"},[n("strong",[t._v("Product code")])]),t._v(" "),n("div",{staticClass:"col-sm-2"},[n("strong",[t._v("Std price : latest")])]),t._v(" "),n("div",{staticClass:"col-sm-2"},[n("strong",[t._v("Discount")])]),t._v(" "),n("div",{staticClass:"col-sm-2"},[n("strong",[t._v("Client price")])]),t._v(" "),n("div",{staticClass:"col-sm-3"},[n("strong",[t._v("Updated discount")])])])}]}},function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=u[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(c(i.parts[r],e))}else{for(var o=[],r=0;r<i.parts.length;r++)o.push(c(i.parts[r],e));u[i.id]={id:i.id,refs:1,parts:o}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var s=t[i],r=s[0],o=s[1],c=s[2],a=s[3],d={css:o,media:c,sourceMap:a};n[r]?n[r].parts.push(d):e.push(n[r]={id:r,parts:[d]})}return e}function s(t,e){var n=f(),i=h[h.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),h.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function o(t){var e=document.createElement("style");return e.type="text/css",s(t,e),e}function c(t,e){var n,i,s;if(e.singleton){var c=_++;n=v||(v=o(e)),i=a.bind(null,n,c,!1),s=a.bind(null,n,c,!0)}else n=o(e),i=d.bind(null,n),s=function(){r(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}function a(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=m(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function d(t,e){var n=e.css,i=e.media,s=e.sourceMap;if(i&&t.setAttribute("media",i),s&&(n+="\n/*# sourceURL="+s.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var u={},l=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=l(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),f=l(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,_=0,h=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},"undefined"==typeof e.singleton&&(e.singleton=p()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var s=i(t);return n(s,e),function(t){for(var r=[],o=0;o<s.length;o++){var c=s[o],a=u[c.id];a.refs--,r.push(a)}if(t){var d=i(t);n(d,e)}for(var o=0;o<r.length;o++){var a=r[o];if(0===a.refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete u[a.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var i=n(2);"string"==typeof i&&(i=[[t.i,i,""]]);n(5)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){Vue.component("ClientPrices",n(0));new Vue({el:"#app"})}]);